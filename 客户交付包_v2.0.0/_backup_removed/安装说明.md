# ASR + LLM + TTS è¯­éŸ³å¯¹è¯ç³»ç»Ÿ - å®‰è£…è¯´æ˜

## ğŸ¯ å®‰è£…æ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯­éŸ³å¯¹è¯ç³»ç»Ÿï¼Œéœ€è¦æ­£ç¡®å®‰è£…Pythonç¯å¢ƒå’Œç›¸å…³ä¾èµ–åŒ…ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å®Œæˆä»é›¶å¼€å§‹çš„å®Œæ•´å®‰è£…è¿‡ç¨‹ã€‚

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚
- **CPU**: åŒæ ¸ä»¥ä¸Šå¤„ç†å™¨
- **å†…å­˜**: æœ€å°‘4GBï¼Œæ¨è8GB+
- **å­˜å‚¨**: æœ€å°‘1GBå¯ç”¨ç©ºé—´
- **éŸ³é¢‘**: éº¦å…‹é£å’ŒéŸ³é¢‘è¾“å‡ºè®¾å¤‡

### è½¯ä»¶è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **Pythonç‰ˆæœ¬**: Python 3.8+
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

## ğŸš€ å®‰è£…æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…Python

#### Windowsç”¨æˆ·
1. è®¿é—® [Pythonå®˜ç½‘](https://www.python.org/downloads/)
2. ä¸‹è½½Python 3.8+ç‰ˆæœ¬
3. è¿è¡Œå®‰è£…ç¨‹åºï¼Œ**é‡è¦**: å‹¾é€‰"Add Python to PATH"
4. éªŒè¯å®‰è£…ï¼š
   ```cmd
   python --version
   pip --version
   ```

#### macOSç”¨æˆ·
1. ä½¿ç”¨Homebrewå®‰è£…ï¼ˆæ¨èï¼‰ï¼š
   ```bash
   brew install python@3.8
   ```
2. æˆ–ä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…
3. éªŒè¯å®‰è£…ï¼š
   ```bash
   python3 --version
   pip3 --version
   ```

#### Linuxç”¨æˆ·
1. Ubuntu/Debian:
   ```bash
   sudo apt update
   sudo apt install python3 python3-pip python3-venv
   ```
2. CentOS/RHEL:
   ```bash
   sudo yum install python3 python3-pip
   ```
3. éªŒè¯å®‰è£…ï¼š
   ```bash
   python3 --version
   pip3 --version
   ```

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

#### Windows
```cmd
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv asr_llm_env

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
asr_llm_env\Scripts\activate

# éªŒè¯æ¿€æ´»
where python
```

#### macOS/Linux
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv asr_llm_env

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source asr_llm_env/bin/activate

# éªŒè¯æ¿€æ´»
which python
```

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ä¾èµ–åŒ…

1. **ç¡®ä¿åœ¨è™šæ‹Ÿç¯å¢ƒä¸­**ï¼š
   ```bash
   # å‘½ä»¤æç¤ºç¬¦å‰åº”è¯¥æœ‰ (asr_llm_env)
   (asr_llm_env) C:\Users\username>
   ```

2. **å‡çº§pip**ï¼š
   ```bash
   pip install --upgrade pip
   ```

3. **å®‰è£…ä¾èµ–åŒ…**ï¼š
   ```bash
   pip install -r requirements.txt
   ```

4. **éªŒè¯å®‰è£…**ï¼š
   ```bash
   python -c "import pyaudio, speech_recognition, websocket, requests; print('æ‰€æœ‰ä¾èµ–åŒ…å®‰è£…æˆåŠŸï¼')"
   ```

### ç¬¬å››æ­¥ï¼šé…ç½®APIå¯†é’¥

#### 1. é…ç½®LLMæœåŠ¡
ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼š
```python
# æ›¿æ¢ä¸ºæ‚¨çš„å®é™…é…ç½®
API_KEY = "your_actual_api_key_here"
BASE_URL = "https://api.siliconflow.cn"  # æˆ–å…¶ä»–æœåŠ¡å•†
DEFAULT_MODEL = "THUDM/glm-4-9b-chat"   # æˆ–å…¶ä»–æ¨¡å‹
```

#### 2. é…ç½®ç™¾åº¦è¯­éŸ³æœåŠ¡
ç¼–è¾‘ `baidu_tts_config.py` æ–‡ä»¶ï¼š
```python
# æ›¿æ¢ä¸ºæ‚¨çš„ç™¾åº¦äº‘é…ç½®
TTS_APP_ID = "your_baidu_app_id"
TTS_API_KEY = "your_baidu_api_key"
TTS_SECRET_KEY = "your_baidu_secret_key"
```

ç¼–è¾‘ `æµå¼_å‰¯æœ¬2/const.py` æ–‡ä»¶ï¼š
```python
# æ›¿æ¢ä¸ºæ‚¨çš„ç™¾åº¦äº‘é…ç½®
APPID = "your_baidu_app_id"
APPKEY = "your_baidu_app_key"
DEV_PID = "15372"  # ä¸­æ–‡è¯†åˆ«æ¨¡å‹
```

### ç¬¬äº”æ­¥ï¼šæµ‹è¯•å®‰è£…

#### 1. æµ‹è¯•APIè¿æ¥
```bash
python test_api.py
```

#### 2. æµ‹è¯•TTSåŠŸèƒ½
```bash
python test_tts.py
```

#### 3. æµ‹è¯•ASRåŠŸèƒ½
```bash
python test_asr_fix.py
```

## ğŸ”§ å¸¸è§å®‰è£…é—®é¢˜

### é—®é¢˜1ï¼špipå®‰è£…å¤±è´¥
**ç—‡çŠ¶**: `pip install` å‘½ä»¤å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```bash
# å‡çº§pip
python -m pip install --upgrade pip

# ä½¿ç”¨å›½å†…é•œåƒæº
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

### é—®é¢˜2ï¼špyaudioå®‰è£…å¤±è´¥
**ç—‡çŠ¶**: pyaudioå®‰è£…æ—¶å‡ºç°ç¼–è¯‘é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:

#### Windows
```bash
# ä½¿ç”¨é¢„ç¼–è¯‘åŒ…
pip install pipwin
pipwin install pyaudio
```

#### macOS
```bash
# å…ˆå®‰è£…portaudio
brew install portaudio
pip install pyaudio
```

#### Linux
```bash
# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt-get install portaudio19-dev python3-pyaudio
pip install pyaudio
```

### é—®é¢˜3ï¼šæƒé™é—®é¢˜
**ç—‡çŠ¶**: å®‰è£…æ—¶æç¤ºæƒé™ä¸è¶³
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä½¿ç”¨ç”¨æˆ·å®‰è£…æ¨¡å¼
pip install --user -r requirements.txt

# æˆ–ä½¿ç”¨sudoï¼ˆLinux/macOSï¼‰
sudo pip install -r requirements.txt
```

### é—®é¢˜4ï¼šPythonç‰ˆæœ¬ä¸å…¼å®¹
**ç—‡çŠ¶**: æŸäº›åŒ…è¦æ±‚ç‰¹å®šPythonç‰ˆæœ¬
**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿ä½¿ç”¨Python 3.8+
2. æ£€æŸ¥åŒ…çš„ç‰ˆæœ¬å…¼å®¹æ€§
3. è€ƒè™‘ä½¿ç”¨condaç¯å¢ƒç®¡ç†

## ğŸ“± å¯åŠ¨ç³»ç»Ÿ

### æ–¹å¼1ï¼šç›´æ¥å¯åŠ¨
```bash
python asr_llm_working.py
```

### æ–¹å¼2ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬

#### Windows
```cmd
start.bat
```

#### Linux/macOS
```bash
chmod +x start.sh
./start.sh
```

### æ–¹å¼3ï¼šä½¿ç”¨å®‰å…¨ç‰ˆæœ¬
```bash
chmod +x start_safe_fixed.sh
./start_safe_fixed.sh
```

## âœ… å®‰è£…éªŒè¯

### åŠŸèƒ½éªŒè¯æ¸…å•
- [ ] Pythonç¯å¢ƒæ­£å¸¸
- [ ] æ‰€æœ‰ä¾èµ–åŒ…å®‰è£…æˆåŠŸ
- [ ] APIå¯†é’¥é…ç½®æ­£ç¡®
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] éŸ³é¢‘è®¾å¤‡å·¥ä½œæ­£å¸¸
- [ ] ä¸»ç¨‹åºå¯ä»¥å¯åŠ¨
- [ ] è¯­éŸ³è¯†åˆ«åŠŸèƒ½æ­£å¸¸
- [ ] TTSæ’­æ”¾åŠŸèƒ½æ­£å¸¸
- [ ] LLMå¯¹è¯åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½æµ‹è¯•
1. **å“åº”é€Ÿåº¦æµ‹è¯•**ï¼š
   - è¯­éŸ³è¯†åˆ«å»¶è¿Ÿ < 2ç§’
   - TTSå¯åŠ¨å»¶è¿Ÿ < 1ç§’
   - LLMå“åº”å»¶è¿Ÿ < 5ç§’

2. **ç¨³å®šæ€§æµ‹è¯•**ï¼š
   - è¿ç»­å¯¹è¯30åˆ†é’Ÿæ— é”™è¯¯
   - æ‰“æ–­åŠŸèƒ½æ­£å¸¸å·¥ä½œ
   - é”™è¯¯æ¢å¤æœºåˆ¶æœ‰æ•ˆ

## ğŸ”’ å®‰å…¨é…ç½®

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
1. **ä½¿ç”¨ç¯å¢ƒå˜é‡**ï¼š
   ```bash
   export API_KEY="your_api_key"
   export BAIDU_APP_ID="your_app_id"
   ```

2. **é™åˆ¶ç½‘ç»œè®¿é—®**ï¼š
   - åªå…è®¸å¿…è¦çš„APIæœåŠ¡è®¿é—®
   - ä½¿ç”¨é˜²ç«å¢™é™åˆ¶ç«¯å£è®¿é—®

3. **å®šæœŸæ›´æ–°**ï¼š
   ```bash
   pip install --upgrade -r requirements.txt
   ```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å®‰è£…é—®é¢˜
å¦‚æœé‡åˆ°å®‰è£…é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥ç³»ç»Ÿè¦æ±‚æ˜¯å¦æ»¡è¶³
2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ä¿¡æ¯
3. å°è¯•ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
4. æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€

### é…ç½®é—®é¢˜
å¦‚æœé‡åˆ°é…ç½®é—®é¢˜ï¼Œè¯·ï¼š
1. éªŒè¯APIå¯†é’¥æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€
3. ç¡®è®¤æœåŠ¡å•†æœåŠ¡çŠ¶æ€
4. æŸ¥çœ‹é…ç½®æ–‡ä»¶æ ¼å¼

### åŠŸèƒ½é—®é¢˜
å¦‚æœé‡åˆ°åŠŸèƒ½é—®é¢˜ï¼Œè¯·ï¼š
1. è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯
2. æŸ¥çœ‹ç¨‹åºæ—¥å¿—è¾“å‡º
3. æ£€æŸ¥éŸ³é¢‘è®¾å¤‡çŠ¶æ€
4. éªŒè¯ä¾èµ–åŒ…ç‰ˆæœ¬

---

## ğŸ‰ å®‰è£…å®Œæˆ

æ­å–œï¼æ‚¨å·²ç»æˆåŠŸå®‰è£…äº†ASR + LLM + TTSè¯­éŸ³å¯¹è¯ç³»ç»Ÿã€‚

ç°åœ¨æ‚¨å¯ä»¥ï¼š
1. å¯åŠ¨ç³»ç»Ÿå¼€å§‹ä½¿ç”¨
2. äº«å—æµç•…çš„è¯­éŸ³å¯¹è¯ä½“éªŒ
3. ä½“éªŒæ™ºèƒ½æ‰“æ–­åŠŸèƒ½
4. æ ¹æ®éœ€è¦è°ƒæ•´æ€§èƒ½é…ç½®

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ¯âœ¨

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†æˆ–è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚
